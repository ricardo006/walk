sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,o,n,i){"use strict";return e.extend("ui5.walkthrough.controller.InvoiceList",{onInit(){const e=new o("https://jsonplaceholder.typicode.com/todos");e.attachRequestCompleted(function(){const t=e.getProperty("/");const n=t.map(function(e){return e}).sort(function(e,t){return e.id-t.id});if(window.localStorage){var i=JSON.stringify(n);window.localStorage.setItem("invoiceData",i);this.restoreStatusLocally();var r=window.localStorage.getItem("invoiceData");var s=r?JSON.parse(r):{};var a=new o(s);this.getView().setModel(a,"invoice")}console.log("Dados ordenados pelo ID:",n)}.bind(this))},restoreStatusLocally:function(){if(window.localStorage){var e=window.localStorage.getItem("invoiceData");var t=e?JSON.parse(e):{};console.log("Dados armazenados no Local Storage:",t);var o=this.getView().getModel("invoiceData");var n=o.getProperty("/");for(var i in t){if(t.hasOwnProperty(i)){var r=n.find(function(e){return e.id.toString()===i});if(r){r.completed=t[i]}}}o.setProperty("/",n)}},sortDataById:function(){var e=this.getView().getModel("invoice");var t=e.getProperty("/");t.sort(function(e,t){return e.id-t.id});e.setProperty("/",t);console.log("Dados ordenados pelo ID:",t)},onFilterInvoices(e){const t=[];const o=e.getParameter("query");if(o){t.push(new n("title",i.Contains,o))}const r=this.byId("invoiceList");const s=r.getBinding("items");s.filter(t)},onPress(e){const t=e.getSource();const o=t.getBindingContext("invoice");if(o){const e=o.getProperty("id");const t=this.getOwnerComponent().getRouter();t.navTo("detail",{invoicePath:window.encodeURIComponent(o.getPath().substr(1)),invoiceId:e})}else{console.error("O contexto de ligação ('binding context') não está disponível.")}},onShowDetails:function(e){const t=e.getSource();const o=t.getBindingContext("invoice");if(o){const e=o.getProperty("id");const t=window.localStorage.getItem("invoiceStatus");const n=t?JSON.parse(t):{};const i=o.getPath();const r=n[i]!==undefined?n[i]:o.getProperty("completed");const s=this.getOwnerComponent().getRouter();s.navTo("detail",{invoicePath:window.encodeURIComponent(i.substr(1)),invoiceId:e,completedStatus:r})}else{console.error("O contexto de ligação ('binding context') não está disponível.")}},onToggleCompleted:function(e){var o=e.getSource();var n=this.getView().getModel("invoiceData");var i=o.getBindingContext("invoice");var r=i.getPath();var s=n.getProperty(r+"/completed");n.setProperty(r+"/completed",!s);this.saveStatusLocally(r,!s);t.show("Status alterado com sucesso!");this.refreshView()},refreshView:function(){var e=this.getView().getModel("invoice");e.refresh()}})});
//# sourceMappingURL=InvoiceList.controller.js.map